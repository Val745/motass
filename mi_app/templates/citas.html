{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agendate - Motas</title>
  <link rel="stylesheet" href="{% static 'CSS/citas.css' %}"></head>
<body>

<section class="agendar-section">
    <div class="agendar-container">
        <div class="agendar-text-container">
            <h2 class="agendar-title">¡AGÉNDATE!</h2>
            <p class="agendar-text">Escoge un servicio para agendar tu cita:</p>
            <div class="agendar-servicios">
                <h3>Consulta Veterinaria</h3>
                <div class="agendar-contenido">
                    <p>Desde <strong>$87.599</strong></p>
                    <p><strong>Revisión de cola a cabeza: </strong></p>
                    <ul>
                        <li>Chequeo general de todos los sistemas.</li>
                        <li>Toma de temperatura corporal.</li>
                        <li>Revisión de piel.</li>
                    </ul>
                    <div class="agenda-button-container">
                        <a href="#" class="agenda-button">AGENDAR</a>
                    </div>
                </div>
            </div>
            <div class="agendar-servicios">
                <h3>Baño y peluquería</h3>
                <div class="agendar-contenido">
                    <p>Siempre limpio, nunca inlimpio: Servicio de baño y peluquería para todos los tamaños y todos los tipos de pelo. También puede realizarse un baño medicado de ser necesario para el paciente.</p>
                    <p><strong>Precios:</strong></p>
                    <ul>
                        <li>Baño básico: <strong>$35.000</strong></li>
                        <li>Baño medicado: <strong>$45.000</strong></li>
                        <li>Baño + corte de pelo: <strong>$60.000</strong></li>
                    </ul>
                    <p>Incluye secado, cepillado y limpieza de oídos. También se pueden aplicar tratamientos especiales si el peludo lo necesita.</p>
                    <div class="agenda-button-container">
                        <a href="#" class="agenda-button">AGENDAR</a>
                    </div>
                </div>
            </div>
            <div class="agendar-servicios">
                <h3>Vacunación</h3>
                <div class="agendar-contenido">
                    <p>Desde <strong>$32.800</strong></p>
                    <p>¡Peludo vacunado vale por 2! La vacunación en cachorros ayuda a generar anticuerpos contra las principales enfermedades. Para los peludos mayorcitos (7 años) se realiza un refuerzo anual. Incluye valoración inicial.</p>
                    <div class="agenda-button-container">
                        <a href="#" class="agenda-button">AGENDAR</a>
                    </div>
                </div>
            </div>
            <div class="agendar-servicios">
                <h3>Telemedicina (Consulta virtual)</h3>
                <div class="agendar-contenido">
                    <p>Desde <strong>$55.900</strong></p>
                    <p>¿Tu peludo necesita atención veterinaria pero no puedes desplazarte? Con nuestra consulta virtual, un veterinario te guiará en la evaluación inicial y te brindará recomendaciones, tratamiento o la necesidad de una consulta presencial si es necesario.</p>
                    <p><strong>¿Qué incluye?</strong></p>
                    <ul>
                        <li>Consulta en vivo con un veterinario.</li>
                        <li>Asesoría para primeros auxilios básicos.</li>
                        <li>Revisión de síntomas y diagnóstico preliminar.</li>
                    </ul>
                    <div class="agenda-button-container">
                        <a href="#" class="agenda-button">AGENDAR</a>
                    </div>
                </div>
            </div>
            <div class="agendar-servicios">
                <h3>tramites de viaje</h3>
                <div class="agendar-contenido">
                    <p>Desde <strong>$120.000</strong></p>
                    <p>¿Planeas viajar con tu mascota? Nos encargamos de los documentos y requisitos sanitarios para que tu peludo viaje seguro y sin inconvenientes.</p>
                    <p><strong>Servicios disponibles:</strong></p>
                    <ul>
                        <li>Certificado de salud veterinario.</li>
                        <li>Desparasitación interna y externa.</li>
                        <li>Vacunación exigida para viajes nacionales e internacionales.</li>
                        <li>Asesoría sobre los requisitos según el destino.</li>
                    </ul>
                    <div class="agenda-button-container">
                        <a href="#" class="agenda-button">AGENDAR</a>
                    </div>
                </div>
            </div>
            <div class="agendar-servicios">
                <h3>Otro servicio</h3>
                <div class="agendar-contenido">
                    <p>Si buscas un servicio que no está en la lista, contáctanos y dinos qué necesitas. ¡Estamos aquí para ayudarte y asegurarnos de que tu peludo reciba el mejor cuidado!</p>
                    <p><strong>Algunos servicios adicionales:</strong></p>
                    <ul>
                        <li>Microchip de identificación.</li>
                        <li>Cirugías menores y mayores.</li>
                        <li>Tratamientos dermatológicos.</li>
                        <li>Asesoría en nutrición y bienestar.</li>
                    </ul>
                    <p>Envíanos un mensaje y te brindaremos más información sobre el servicio que buscas.</p>
                    <div class="agenda-button-container">
                        <a href="#" class="agenda-button">CONTACTANOS</a>
                    </div>
                    
                    
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Agrega esto dentro de tu modal-agendar-content -->
<div id="modal-agendar" class="modal-agendar" style="display:none;">
  <div class="modal-agendar-content">
    <span id="cerrar-modal-agendar" class="cerrar-modal">&times;</span>
    <h2>Agendar cita</h2>
    <form id="form-agendar-modal" method="POST" action="{% url 'crear_cita' %}">
    {% csrf_token %}
        {% if form.non_field_errors %}
            <div class="form-errors">
            {% for error in form.non_field_errors %}
                <p class="error-text">{{ error }}</p>
            {% endfor %}
            </div>
        {% endif %}
        {% for field in form %}
            <div class="form-group">
            {{ field.label_tag }}
            {{ field }}
            {% for error in field.errors %}
                <p class="error-text">{{ error }}</p>
            {% endfor %}
            </div>
        {% endfor %}


      <label for="servicio-modal">Servicio:</label>
      <input type="text" id="servicio-modal" name="servicio" readonly required>
      
    <div class="form-group">
        <label for="mascota-modal">Mascota:</label>
        <select id="mascota-modal" name="mascota" class="form-control" required>
        <option value="">Selecciona tu mascota</option>
        {% for mascota in mascotas %}
            <option value="{{ mascota.id }}">{{ mascota.nombre }}</option>
        {% endfor %}
        </select>
    </div>
    
    <div class="form-group">
        <label for="dia-modal">Fecha:</label>
        <input type="date" id="dia-modal" name="fecha" class="form-control" required>
    </div>
    
    <div class="form-group">
        <label for="hora-modal">Hora:</label>
        <select id="hora-modal" name="hora" class="form-control" required>
        <option value="">Selecciona un horario</option>
        </select>
    </div>
    
    <button type="submit" class="btn btn-primary">Agendar cita</button>
    </form>
  </div>
</div>

<div id="modal-sin-mascotas" class="modal-agendar" style="display:none;">
  <div class="modal-agendar-content">
    <span id="cerrar-modal-sin-mascotas" class="cerrar-modal">&times;</span>
    <h2>¡Atención!</h2>
    <p>Debes registrar una mascota para poder agendarle una cita.</p>
    <button id="ir-a-perfil">AGREGAR MASCOTA</button>
  </div>
</div>

<script>
    var userHasMascotas = "{{ mascotas|length|yesno:'true,false' }}" === "true";
</script>
<script src="{% static 'js/citas.js' %}"></script>
</body>
</html>